<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>생산 공정 관리 시스템</title>
    <style>
        /* 기본 스타일 초기화 */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Pretendard', sans-serif; display: flex; height: 100vh; background-color: #f4f4f4; }

        /* 왼쪽 사이드바 스타일 */
        nav {
            width: 200px;
            background-color: #2c3e50;
            color: white;
            display: flex;
            flex-direction: column;
            padding-top: 20px;
            flex-shrink: 0;
        }

        nav h2 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.2rem;
        }

        nav button {
            background: none;
            border: none;
            color: #ecf0f1;
            padding: 15px 20px;
            text-align: left;
            cursor: pointer;
            font-size: 1rem;
            transition: background 0.3s;
        }

        nav button:hover { background-color: #34495e; }
        nav button.active { background-color: #1abc9c; font-weight: bold; }

        /* 오른쪽 콘텐츠 영역 스타일 */
        main {
            flex-grow: 1;
            padding: 30px;
            overflow-y: auto;
        }

        .content-section {
            display: none; /* 기본적으로 숨김 */
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .content-section.active {
            display: block; /* 활성화된 메뉴만 보임 */
        }

        /* 그룹 및 테이블 스타일 */
        .group-container {
            margin-bottom: 30px;
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 5px;
        }

        .group-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: #2c3e50;
            border-bottom: 2px solid #1abc9c;
            display: inline-block;
            padding-bottom: 5px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }

        th { background-color: #f8f9fa; }

        /* 입력 필드 스타일 */
        input[type="time"] {
            width: 100%;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 1rem;
            text-align: center;
        }

        input[type="time"]:focus {
            border-color: #1abc9c;
            outline: none;
        }
    </style>
</head>
<body>

    <nav>
        <h2>수세 공정</h2>
        <button onclick="showTab('dry')" class="active" id="btn-dry">건조 메뉴</button>
        <button onclick="showTab('mix')" id="btn-mix">배합 메뉴</button>
        <button onclick="showTab('cool')" id="btn-cool">냉각 메뉴</button>
    </nav>

    <main>
        <div id="dry" class="content-section active">
            <h1>건조 공정 (+3시간)</h1>
            <div id="dry-content"></div> </div>

        <div id="mix" class="content-section">
            <h1>배합 공정 (+25분)</h1>
            <div id="mix-content"></div> </div>

        <div id="cool" class="content-section">
            <h1>냉각 공정</h1>
            <p>냉각 관련 내용은 이곳에 추가됩니다.</p>
        </div>
    </main>

    <script>
        // 초기화 실행
        document.addEventListener('DOMContentLoaded', () => {
            // 건조 메뉴 생성 (A, B, C 그룹 / 각 7칸 / +180분)
            generateGroups('dry-content', ['A', 'B', 'C'], 7, 180);
            
            // 배합 메뉴 생성 (A, B, C, D 그룹 / 각 7칸 / +25분)
            generateGroups('mix-content', ['A', 'B', 'C', 'D'], 7, 25);
        });

        // 탭 전환 함수 (데이터 보존을 위해 display 속성만 변경)
        function showTab(tabId) {
            // 모든 섹션 숨기기
            document.querySelectorAll('.content-section').forEach(el => el.classList.remove('active'));
            // 모든 버튼 비활성화 스타일
            document.querySelectorAll('nav button').forEach(el => el.classList.remove('active'));

            // 선택한 섹션 및 버튼 활성화
            document.getElementById(tabId).classList.add('active');
            document.getElementById(`btn-${tabId}`).classList.add('active');
        }

        // 동적으로 HTML 구조 생성 및 이벤트 연결 함수
        function generateGroups(containerId, groupNames, rowCount, addMinutes) {
            const container = document.getElementById(containerId);
            
            groupNames.forEach(groupName => {
                // 그룹 컨테이너 생성
                const groupDiv = document.createElement('div');
                groupDiv.className = 'group-container';

                // 그룹 제목
                const title = document.createElement('div');
                title.className = 'group-title';
                title.innerText = `그룹 ${groupName}`;
                groupDiv.appendChild(title);

                // 테이블 생성
                const table = document.createElement('table');
                table.innerHTML = `
                    <thead>
                        <tr>
                            <th width="10%">No</th>
                            <th width="45%">시작 시간</th>
                            <th width="45%">종료 시간 (자동 계산)</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                `;
                const tbody = table.querySelector('tbody');

                // 행(Row) 생성
                for (let i = 1; i <= rowCount; i++) {
                    const tr = document.createElement('tr');
                    
                    // 칸 번호
                    const tdNo = document.createElement('td');
                    tdNo.innerText = i;
                    
                    // 시작 시간 입력칸
                    const tdStart = document.createElement('td');
                    const inputStart = document.createElement('input');
                    inputStart.type = 'time';
                    // 이벤트 리스너: 값이 바뀌면 계산 함수 호출
                    inputStart.addEventListener('input', function() {
                        calculateEndTime(this, inputEnd, addMinutes);
                    });
                    tdStart.appendChild(inputStart);

                    // 종료 시간 입력칸 (자동 계산되지만 수정 가능)
                    const tdEnd = document.createElement('td');
                    const inputEnd = document.createElement('input');
                    inputEnd.type = 'time';
                    tdEnd.appendChild(inputEnd);

                    tr.appendChild(tdNo);
                    tr.appendChild(tdStart);
                    tr.appendChild(tdEnd);
                    tbody.appendChild(tr);
                }

                groupDiv.appendChild(table);
                container.appendChild(groupDiv);
            });
        }

        // 시간 계산 로직
        function calculateEndTime(startInput, endInput, minutesToAdd) {
            if (!startInput.value) {
                endInput.value = '';
                return;
            }

            // 입력된 시간 (HH:mm) 파싱
            const [hours, minutes] = startInput.value.split(':').map(Number);
            
            // Date 객체를 사용하여 시간 계산 (자정이 넘어가는 경우도 자동 처리됨)
            const date = new Date();
            date.setHours(hours);
            date.setMinutes(minutes + minutesToAdd);

            // HH:mm 포맷으로 변환
            const resultHours = String(date.getHours()).padStart(2, '0');
            const resultMinutes = String(date.getMinutes()).padStart(2, '0');

            // 오른쪽 칸에 값 입력
            endInput.value = `${resultHours}:${resultMinutes}`;
        }
    </script>
</body>
</html>
