
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>수세 메모용2 2 2</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      background: #f9f9f9;
    }
    .container {
      display: flex;
      flex-direction: row;
      justify-content: center;
      align-items: flex-start;
      gap: 2rem;
      margin: 40px 10px;
    }
    .memo-section {
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 12px #ddd;
      padding: 2rem 1.5rem 1.5rem 1.5rem;
      width: 160px;
      min-width: 160px;
      flex-shrink: 0;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    h1 {
      text-align: center;
      margin-bottom: 1.5rem;
      letter-spacing: -2px;
    }
    .memoinput-group {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    label {
      font-size: 1.05rem;
      margin-bottom: 4px;
      color: #444;
    }
    .memoline {
      display: flex;
      align-items: center;
      gap: 6px;
      margin-bottom: 2px;
    }
    .memo-small {
      width: 36px !important;
      font-size: 0.75em !important;
      padding: 1px 2px !important;
      margin-right: 4px;
      background: #f0f0fa !important;
    }
    input[type="text"] {
      padding: 2px 3px;
      border: 1px solid #bbb;
      border-radius: 4px;
      font-size: 0.82rem;
      outline: none;
      background: #f8f8fc;
      transition: border 0.2s;
      height: 20px;
      width: 70px;
      box-sizing: border-box;
    }
    input[type="text"]:focus {
      border: 1.5px solid #7a77ee;
    }
    input[type="checkbox"].memocheck {
      width: 15px;
      height: 15px;
      accent-color: #7a77ee;
      margin-left: 3px;
      margin-right: 2px;
      vertical-align: middle;
      flex-shrink: 0;
    }
    .actions {
      display: flex;
      gap: 1rem;
      margin-top: 10px;
    }
    button {
      padding: 6px 15px;
      font-size: 0.98rem;
      border-radius: 5px;
      border: none;
      background: #7a77ee;
      color: #fff;
      cursor: pointer;
      transition: background 0.2s;
    }
    button:hover {
      background: #5956d2;
    }
    .reset-top-center-wrap {
      width: 100%;
      display: flex;
      justify-content: center;
      margin-top: 25px;
      margin-bottom: -15px;
      /* 버튼과 헤딩 중앙 사이 조정 */
    }
    .reset-top-center-wrap button {
      font-size: 1.045rem;
      padding: 7px 25px;
      border-radius: 26px;
      box-shadow: 0 2px 8px #eaeafe;
      background: #7a77ee;
    }
    .result-area {
      padding: 1rem;
      border-radius: 8px;
      min-height: 100px;
      margin-top: 10px;
      background: #fafbfc;
      box-shadow: 0 1px 6px #eee;
      color: #222;
      word-break: break-all;
      font-size: 1.12rem;
    }
    .group-title {
      font-weight: bold;
      color: #325;
      margin-bottom: 10px;
      font-size: 1.08rem;
      letter-spacing: -1px;
      margin-top: 10px;
    }

    @media (max-width: 950px) {
      .container {
        flex-direction: column;
        align-items: stretch;
        gap: 2rem;
        margin: 24px 2vw;
      }
      .memo-section {
        width: 100%;
        min-width: unset;
        margin: 0 auto;
        max-width: 480px;
      }
    }

    @media (max-width: 500px) {
      .container {
        margin: 8px 2vw;
      }
      .memo-section {
        padding: 1rem 0.7rem 1.2rem 0.7rem;
        font-size: 0.97rem;
      }
      h1 {
        font-size: 1.4rem;
      }
      input[type="text"] {
        font-size: 0.86rem;
        padding: 2px 3px;
        height: 20px;
        width: 84px;
      }
      button {
        font-size: 1rem;
        padding: 8px 20px;
      }
      .reset-top-center-wrap button {
        font-size: 1rem;
        padding: 8px 26px;
      }
      .reset-top-center-wrap {
        margin-top: 12px;
        margin-bottom: -6px;
      }
      input[type="checkbox"].memocheck {
        width: 19px;
        height: 19px;
      }
      .memo-small {
        width: 44px !important;
        font-size: 0.83em !important;
      }
    }
  </style>
</head>
<body>
  <div class="reset-top-center-wrap">
    <button id="resetBtn">초기화</button>
  </div>
  <h1>수세 메모용</h1>
  <div class="container">
    <!-- 좌측 메모입력란 -->
    <div class="memo-section" id="memoSection1">
      <div class="memoinput-group">
        <div class="group-title">건조 1 ~ 5</div>
        <div class="memoline">
          <input type="text" class="memo-small" id="memo1s" autocomplete="off" placeholder="소">
          <label for="memo1">건조 1</label>
          <input type="text" id="memo1" autocomplete="off">
          <input type="checkbox" class="memocheck" id="check1">
        </div>
        <div class="memoline">
          <input type="text" class="memo-small" id="memo2s" autocomplete="off" placeholder="소">
          <label for="memo2">건조 2</label>
          <input type="text" id="memo2" autocomplete="off">
          <input type="checkbox" class="memocheck" id="check2">
        </div>
        <div class="memoline">
          <input type="text" class="memo-small" id="memo3s" autocomplete="off" placeholder="소">
          <label for="memo3">건조 3</label>
          <input type="text" id="memo3" autocomplete="off">
          <input type="checkbox" class="memocheck" id="check3">
        </div>
        <div class="memoline">
          <input type="text" class="memo-small" id="memo4s" autocomplete="off" placeholder="소">
          <label for="memo4">건조 4</label>
          <input type="text" id="memo4" autocomplete="off">
          <input type="checkbox" class="memocheck" id="check4">
        </div>
        <div class="memoline">
          <input type="text" class="memo-small" id="memo5s" autocomplete="off" placeholder="소">
          <label for="memo5">건조 5</label>
          <input type="text" id="memo5" autocomplete="off">
          <input type="checkbox" class="memocheck" id="check5">
        </div>
      </div>
      <div class="memoinput-group">
        <div class="group-title">메모 6 ~ 10</div>
        <div class="memoline">
          <input type="text" class="memo-small" id="memo6s" autocomplete="off" placeholder="소">
          <label for="memo6">메모 6</label>
          <input type="text" id="memo6" autocomplete="off">
          <input type="checkbox" class="memocheck" id="check6">
        </div>
        <div class="memoline">
          <input type="text" class="memo-small" id="memo7s" autocomplete="off" placeholder="소">
          <label for="memo7">메모 7</label>
          <input type="text" id="memo7" autocomplete="off">
          <input type="checkbox" class="memocheck" id="check7">
        </div>
        <div class="memoline">
          <input type="text" class="memo-small" id="memo8s" autocomplete="off" placeholder="소">
          <label for="memo8">메모 8</label>
          <input type="text" id="memo8" autocomplete="off">
          <input type="checkbox" class="memocheck" id="check8">
        </div>
        <div class="memoline">
          <input type="text" class="memo-small" id="memo9s" autocomplete="off" placeholder="소">
          <label for="memo9">메모 9</label>
          <input type="text" id="memo9" autocomplete="off">
          <input type="checkbox" class="memocheck" id="check9">
        </div>
        <div class="memoline">
          <input type="text" class="memo-small" id="memo10s" autocomplete="off" placeholder="소">
          <label for="memo10">메모 10</label>
          <input type="text" id="memo10" autocomplete="off">
          <input type="checkbox" class="memocheck" id="check10">
        </div>
      </div>
      <!-- actions div 제거됨(초기화 버튼 분리됨) -->
    </div>

    <!-- 결과 박스 (모든 입력 메모 표시, 우측 고정) -->
    <div class="memo-section">
      <div class="group-title">메모 결과</div>
      <div class="result-area" id="resultArea"></div>
    </div>

    <!-- 추가: 두 번째 메모입력란 -->
    <div class="memo-section" id="memoSection2">
      <div class="memoinput-group">
        <div class="group-title">건조 11 ~ 15</div>
        <div class="memoline">
          <input type="text" class="memo-small" id="memo11s" autocomplete="off" placeholder="소">
          <label for="memo11">건조 11</label>
          <input type="text" id="memo11" autocomplete="off">
          <input type="checkbox" class="memocheck" id="check11">
        </div>
        <div class="memoline">
          <input type="text" class="memo-small" id="memo12s" autocomplete="off" placeholder="소">
          <label for="memo12">건조 12</label>
          <input type="text" id="memo12" autocomplete="off">
          <input type="checkbox" class="memocheck" id="check12">
        </div>
        <div class="memoline">
          <input type="text" class="memo-small" id="memo13s" autocomplete="off" placeholder="소">
          <label for="memo13">건조 13</label>
          <input type="text" id="memo13" autocomplete="off">
          <input type="checkbox" class="memocheck" id="check13">
        </div>
        <div class="memoline">
          <input type="text" class="memo-small" id="memo14s" autocomplete="off" placeholder="소">
          <label for="memo14">건조 14</label>
          <input type="text" id="memo14" autocomplete="off">
          <input type="checkbox" class="memocheck" id="check14">
        </div>
        <div class="memoline">
          <input type="text" class="memo-small" id="memo15s" autocomplete="off" placeholder="소">
          <label for="memo15">건조 15</label>
          <input type="text" id="memo15" autocomplete="off">
          <input type="checkbox" class="memocheck" id="check15">
        </div>
      </div>
      <div class="memoinput-group">
        <div class="group-title">메모 16 ~ 20</div>
        <div class="memoline">
          <input type="text" class="memo-small" id="memo16s" autocomplete="off" placeholder="소">
          <label for="memo16">메모 16</label>
          <input type="text" id="memo16" autocomplete="off">
          <input type="checkbox" class="memocheck" id="check16">
        </div>
        <div class="memoline">
          <input type="text" class="memo-small" id="memo17s" autocomplete="off" placeholder="소">
          <label for="memo17">메모 17</label>
          <input type="text" id="memo17" autocomplete="off">
          <input type="checkbox" class="memocheck" id="check17">
        </div>
        <div class="memoline">
          <input type="text" class="memo-small" id="memo18s" autocomplete="off" placeholder="소">
          <label for="memo18">메모 18</label>
          <input type="text" id="memo18" autocomplete="off">
          <input type="checkbox" class="memocheck" id="check18">
        </div>
        <div class="memoline">
          <input type="text" class="memo-small" id="memo19s" autocomplete="off" placeholder="소">
          <label for="memo19">메모 19</label>
          <input type="text" id="memo19" autocomplete="off">
          <input type="checkbox" class="memocheck" id="check19">
        </div>
        <div class="memoline">
          <input type="text" class="memo-small" id="memo20s" autocomplete="off" placeholder="소">
          <label for="memo20">메모 20</label>
          <input type="text" id="memo20" autocomplete="off">
          <input type="checkbox" class="memocheck" id="check20">
        </div>
      </div>
    </div>

    <!-- 결과 박스 2 -->
    <div class="memo-section">
      <div class="group-title">메모 결과2</div>
      <div class="result-area" id="resultArea2"></div>
    </div>

    <!-- 추가: 세 번째 메모입력란 -->
    <div class="memo-section" id="memoSection3">
      <div class="memoinput-group">
        <div class="group-title">건조 21 ~ 25</div>
        <div class="memoline">
          <input type="text" class="memo-small" id="memo21s" autocomplete="off" placeholder="소">
          <label for="memo21">건조 21</label>
          <input type="text" id="memo21" autocomplete="off">
          <input type="checkbox" class="memocheck" id="check21">
        </div>
        <div class="memoline">
          <input type="text" class="memo-small" id="memo22s" autocomplete="off" placeholder="소">
          <label for="memo22">건조 22</label>
          <input type="text" id="memo22" autocomplete="off">
          <input type="checkbox" class="memocheck" id="check22">
        </div>
        <div class="memoline">
          <input type="text" class="memo-small" id="memo23s" autocomplete="off" placeholder="소">
          <label for="memo23">건조 23</label>
          <input type="text" id="memo23" autocomplete="off">
          <input type="checkbox" class="memocheck" id="check23">
        </div>
        <div class="memoline">
          <input type="text" class="memo-small" id="memo24s" autocomplete="off" placeholder="소">
          <label for="memo24">건조 24</label>
          <input type="text" id="memo24" autocomplete="off">
          <input type="checkbox" class="memocheck" id="check24">
        </div>
        <div class="memoline">
          <input type="text" class="memo-small" id="memo25s" autocomplete="off" placeholder="소">
          <label for="memo25">건조 25</label>
          <input type="text" id="memo25" autocomplete="off">
          <input type="checkbox" class="memocheck" id="check25">
        </div>
      </div>
      <div class="memoinput-group">
        <div class="group-title">메모 26 ~ 30</div>
        <div class="memoline">
          <input type="text" class="memo-small" id="memo26s" autocomplete="off" placeholder="소">
          <label for="memo26">메모 26</label>
          <input type="text" id="memo26" autocomplete="off">
          <input type="checkbox" class="memocheck" id="check26">
        </div>
        <div class="memoline">
          <input type="text" class="memo-small" id="memo27s" autocomplete="off" placeholder="소">
          <label for="memo27">메모 27</label>
          <input type="text" id="memo27" autocomplete="off">
          <input type="checkbox" class="memocheck" id="check27">
        </div>
        <div class="memoline">
          <input type="text" class="memo-small" id="memo28s" autocomplete="off" placeholder="소">
          <label for="memo28">메모 28</label>
          <input type="text" id="memo28" autocomplete="off">
          <input type="checkbox" class="memocheck" id="check28">
        </div>
        <div class="memoline">
          <input type="text" class="memo-small" id="memo29s" autocomplete="off" placeholder="소">
          <label for="memo29">메모 29</label>
          <input type="text" id="memo29" autocomplete="off">
          <input type="checkbox" class="memocheck" id="check29">
        </div>
        <div class="memoline">
          <input type="text" class="memo-small" id="memo30s" autocomplete="off" placeholder="소">
          <label for="memo30">메모 30</label>
          <input type="text" id="memo30" autocomplete="off">
          <input type="checkbox" class="memocheck" id="check30">
        </div>
      </div>
    </div>

    <!-- 결과 박스 3 -->
    <div class="memo-section">
      <div class="group-title">메모 결과3</div>
      <div class="result-area" id="resultArea3"></div>
    </div>
  </div>

  <script>
    // 메모 필드 id 배열 (기존)
    const memoIds = [
      "memo1", "memo2", "memo3", "memo4", "memo5",
      "memo6", "memo7", "memo8", "memo9", "memo10",
      "memo11", "memo12", "memo13", "memo14", "memo15",
      "memo16", "memo17", "memo18", "memo19", "memo20",
      "memo21", "memo22", "memo23", "memo24", "memo25",
      "memo26", "memo27", "memo28", "memo29", "memo30"
    ];

    // 추가: 작은 입력 필드 id 배열 (_소칸, id: memoXs)
    const memoSmallIds = [
      "memo1s", "memo2s", "memo3s", "memo4s", "memo5s",
      "memo6s", "memo7s", "memo8s", "memo9s", "memo10s",
      "memo11s", "memo12s", "memo13s", "memo14s", "memo15s",
      "memo16s", "memo17s", "memo18s", "memo19s", "memo20s",
      "memo21s", "memo22s", "memo23s", "memo24s", "memo25s",
      "memo26s", "memo27s", "memo28s", "memo29s", "memo30s"
    ];

    // 체크박스 id 배열 (1~30)
    const checkIds = [
      "check1","check2","check3","check4","check5",
      "check6","check7","check8","check9","check10",
      "check11","check12","check13","check14","check15",
      "check16","check17","check18","check19","check20",
      "check21","check22","check23","check24","check25",
      "check26","check27","check28","check29","check30"
    ];

    // 각 메모 그룹의 시작 인덱스와 타이틀 정보
    const groups = [
      {start: 0,   end: 9,   resultArea: 'resultArea',   dryLabel: "건조", memoLabel: "배합"},
      {start: 10,  end: 19,  resultArea: 'resultArea2',  dryLabel: "건조", memoLabel: "배합"},
      {start: 20,  end: 29,  resultArea: 'resultArea3',  dryLabel: "건조", memoLabel: "배합"},
    ];

    // DB Save/Load (전체 30 + 체크박스 + 소칸)
    function saveMemosToDB(memos, checks, memosSmall) {
      localStorage.setItem('suse_memo_data_v3', JSON.stringify(memos));
      localStorage.setItem('suse_memo_check_v3', JSON.stringify(checks));
      localStorage.setItem('suse_memo_data_small_v3', JSON.stringify(memosSmall));
    }
    function loadMemosFromDB() {
      const val = localStorage.getItem('suse_memo_data_v3');
      if (val) return JSON.parse(val);
      return {};
    }
    function loadChecksFromDB() {
      const val = localStorage.getItem('suse_memo_check_v3');
      if (val) return JSON.parse(val);
      return {};
    }
    function loadMemosSmallFromDB() {
      const val = localStorage.getItem('suse_memo_data_small_v3');
      if (val) return JSON.parse(val);
      return {};
    }

    // 입력값 반영
    function updateResultArea() {
      for (let g = 0; g < groups.length; g++) {
        const group = groups[g];
        let resHtml = "";
        for (let i = group.start; i <= group.end; i++) {
          const val = document.getElementById(memoIds[i]).value.trim();
          const checked = document.getElementById(checkIds[i]).checked;
          const smallVal = document.getElementById(memoSmallIds[i]).value.trim();
          if (val || smallVal) {
            let labelText;
            if (i - group.start < 5) {
              labelText = `${group.dryLabel} ${(i-group.start)+1}`;
            } else {
              labelText = `${group.memoLabel} ${(i-group.start)-4}`;
            }
            let smallText = smallVal ? `<span style="color:#669;font-size:0.98em;">[${smallVal}]</span> ` : "";
            let valueText = val ? val + " " : "";
            resHtml += `<div><b>${labelText}:</b> ${smallText}${valueText}${checked ? "<span style='color:#635;font-size:0.98em;'>&#10003;</span>" : ""}</div>`;
          }
        }
        document.getElementById(group.resultArea).innerHTML = resHtml || "<div style='color:#aaa'>입력된 메모가 없습니다.</div>";
      }
    }

    // 입력값 저장
    function saveAll() {
      let memos = {};
      let checks = {};
      let memosSmall = {};
      for (let i = 0; i < memoIds.length; i++) {
        memos[memoIds[i]] = document.getElementById(memoIds[i]).value;
        checks[checkIds[i]] = document.getElementById(checkIds[i]).checked ? 1 : 0;
        memosSmall[memoSmallIds[i]] = document.getElementById(memoSmallIds[i]).value;
      }
      saveMemosToDB(memos, checks, memosSmall);
      updateResultArea();
    }

    // 이벤트 연결
    for (let i = 0; i < memoIds.length; i++) {
      document.getElementById(memoIds[i]).addEventListener('input', saveAll);
      document.getElementById(checkIds[i]).addEventListener('change', saveAll);
      document.getElementById(memoSmallIds[i]).addEventListener('input', saveAll);
    }

    // 초기 로딩
    function loadAll() {
      const memos = loadMemosFromDB();
      const checks = loadChecksFromDB();
      const memosSmall = loadMemosSmallFromDB();
      for (let i = 0; i < memoIds.length; i++) {
        document.getElementById(memoIds[i]).value = memos[memoIds[i]] || "";
        document.getElementById(checkIds[i]).checked = (checks[checkIds[i]] == 1);
        document.getElementById(memoSmallIds[i]).value = memosSmall[memoSmallIds[i]] || "";
      }
      updateResultArea();
    }
    loadAll();

    // 초기화 (맨위 버튼)
    document.getElementById('resetBtn').addEventListener('click', function() {
      const confirmed = window.confirm("박스 안에 있는 모든 내용이 초기화 됩니다. 계속하시겠습니까?");
      if (confirmed) {
        const password = window.prompt("초기화를 위해 비밀번호 4자리를 입력하세요.", "");
        if (password === null) {
          // 취소
          return;
        }
        if (password !== "6318") {
          alert("비밀번호가 일치하지 않습니다. 초기화가 취소됩니다.");
          return;
        }
        for (let i = 0; i < memoIds.length; i++) {
          document.getElementById(memoIds[i]).value = "";
          document.getElementById(checkIds[i]).checked = false;
          document.getElementById(memoSmallIds[i]).value = "";
        }
        saveAll();
      }
      // 아니오: 아무 일도 없음
    });

  </script>
</body>
</html>
